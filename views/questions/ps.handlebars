{{#unless user}}
    <div class="card border-dark mb-3">
        <div class="card-body">
            <h4>You must be logged in to use this feature. If you are taking this class you should create an account and
                log
                in.
            </h4>
        </div>
    </div>
{{else}}


    <!-- Priority 1! -->
    <!-- Get new PS (Warn them that it will replace an un-submitted PS if they have one out) -->
    <!-- AutoLab link for submissions -->
    <!-- Log EVERYTHING! -->


    <div class="card border-dark mb-3">
        <div class="card-body">

            <a href="/courses/{{course.course}}/ps-download" class="btn btn-primary">
                {{#if user_ps.current_ps_finished}}
                    Download New Problem Set
                {{else}}
                    Download Current Problem Set
                {{/if}}</a>
            <br/><br/>
            <p>
                Submit here, then come back for a new problem set: <a
                    href="https://autograder.cse.buffalo.edu/courses/CSE115-s18/assessments/problemsets"
                    target="_blank">Autolab</a>
            </p>

        </div>
    </div>


    <div class="card border-dark mb-3">
        <div class="card-body">
            <p>Level {{user_ps.level}}</p>
            <!--<span>{{xp_for_previous_level}}</span>-->
            <div class="progress">
                <div class="progress-bar" style="width:{{xp_percentage_to_next_level}}%">{{user_ps.total_xp}}
                    / {{xp_for_next_level}}</div>
            </div>
            <!--<span>{{xp_for_next_level}}</span>-->
        </div>
    </div>


    <div class="card border-dark mb-3">
        <div class="card-body">
            {{#with user_ps.current_ps}}
                <!--<h5>Current Problem Set</h5>-->
                <h5>{{class_name}}</h5>
                <p>
                    {{#if user_ps.current_ps_finished}}
                        Submitted. You cannot earn more points for the problem set, though you can resubmit on AutoLab
                        for
                        extra practice
                    {{else}}
                        Not yet submitted
                    {{/if}}
                </p>
                {{#each multiplier}}
                    <div class="alert alert-success"><h4>x{{this.multiplier}}</h4>: {{this.reason}}</div>
                {{/each}}
                {{#each questions}}
                    <p>Question {{increment @index}}<br/>
                        {{this.instruction_text}}
                    </p>
                    {{#each this.cards}}
                        <p>
                            Card: {{this}}
                        </p>
                    {{/each}}
                {{/each}}
            {{/with}}
        </div>
    </div>

    <div class="card border-dark mb-3">
        <div class="card-body">

            <h5>Previous Problem Sets</h5>

            {{#each ps_completed}}

                <div class="card border-dark mb-3">
                    <div class="card-body">
                        {{#with this}}
                            <h5>{{class_name}}</h5>

                            {{#each multiplier}}
                                <div class="alert alert-success"><h4>x{{this.multiplier}}</h4>: {{this.reason}}</div>
                            {{/each}}
                            {{#each questions}}
                                <p>Question {{increment @index}}</p>
                                <p>
                                    {{this.instruction_text}}<br/>
                                    {{#if this.correct}}
                                        Correct
                                    {{else}}
                                        Incorrect
                                    {{/if}}
                                    <br/>
                                    {{this.feedback}}
                                </p>
                                {{#each this.cards}}
                                    <p>
                                        Card: {{this}}
                                    </p>
                                {{/each}}
                            {{/each}}
                        {{/with}}
                    </div>
                </div>
            {{/each}}

        </div>
    </div>

    <!-- Priority 2 -->
    <!-- Progress towards next goal -->
    <!-- Feedback on most recent PS -->

    <!-- Priority 3 -->
    <!-- Re-download current PS is it's checked out and not submitted -->
    <!-- Feedback for all previous PSs -->
    <!-- Remind them of office hours after poor performance -->
    <!-- Report an issue button -->

    <!-- Priority 4 -->
    <!-- Tie into office hours tracking/queueing -->


    <div class="card border-dark mb-3">
        <div class="card-body">

        </div>
    </div>

    <div class="card-deck">
        <div class="card  border-dark mb-3" style="max-width: 18rem;">
            <div class="card-header bg-primary text-white">Variables: Expressions</div>
            <div class="card-body">
                <h5 class="card-title">Expressions</h5>
                <p class="card-text">A section of code that evaluates to a single value</p>
                <ul>
                    <li>Can include function calls</li>
                    <li>The resulting value can be used anywhere a value can be used</li>
                    <li>An expression can be a single variable</li>
                </ul>
            </div>
            <div class="card-footer"><a href="#">More</a></div>
        </div>


        <div class="card  border-dark mb-3" style="max-width: 18rem;">
            <div class="card-header bg-primary text-white">Data Structures: ArrayList</div>
            <div class="card-body">
                <h5 class="card-title">ArrayList</h5>
                <p class="card-text">A data structure that can store multiple values of a single type</p>
                <ul>
                    <li>Values are indexed from 0 to size-1</li>
                    <li>The type that can be stored must be declared with a type parameter. Ex.
                        ArrayList&lt;Integer&gt;</li>
                    <li>Type parameter must be a class, not a primitive (Starts with capital letter)</li>
                </ul>
            </div>
            <div class="card-footer"><a href="#">More</a></div>
        </div>


        <div class="card  border-dark mb-3" style="max-width: 18rem;">
            <div class="card-header bg-primary text-white">Networking: HTTP GET</div>
            <div class="card-body">
                <h5 class="card-title">HTTP GET</h5>
                <p class="card-text">Request a resource from website or web API</p>
                <ul>
                    <li>Resource is requested using a url</li>
                    <li>Can include a query string in the url following a ?</li>
                </ul>
            </div>
            <div class="card-footer"><a href="#">More</a></div>
        </div>
    </div>

{{/unless}}